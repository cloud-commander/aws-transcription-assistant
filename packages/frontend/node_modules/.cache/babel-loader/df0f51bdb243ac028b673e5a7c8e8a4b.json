{"ast":null,"code":"import _classCallCheck from\"/home/cmsgdiav/Desktop/React Projects/aws-transcription-assistant-05/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/cmsgdiav/Desktop/React Projects/aws-transcription-assistant-05/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/cmsgdiav/Desktop/React Projects/aws-transcription-assistant-05/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/cmsgdiav/Desktop/React Projects/aws-transcription-assistant-05/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";//@ts-nocheck\nimport React from\"react\";import TimedTextEditor from\"../timed-text-editor\";import MediaPlayer from\"../media-player\";import VideoPlayer from\"../video-player\";import Settings from\"../settings\";import Shortcuts from\"../keyboard-shortcuts\";import{secondsToTimecode}from\"../../util/timecode-converter\";import Header from\"./src/Header.js\";import ExportOptions from\"./src/ExportOptions.js\";import style from\"./index.module.css\";// TODO: move to another file with tooltip - rename HowDoesThisWork or HelpMessage\nimport HowDoesThisWork from\"./src/HowDoesThisWork.js\";var exportOptionsList=[{value:\"txt\",label:\"Text file\"},{value:\"txtspeakertimecodes\",label:\"Text file - with Speakers and Timecodes\"},{value:\"docx\",label:\"MS Word\"},{value:\"csv\",label:\"CSV - Captions\"},{value:\"draftjs\",label:\"Draft Js - json\"}];var TranscriptEditor=/*#__PURE__*/function(_React$Component){_inherits(TranscriptEditor,_React$Component);var _super=_createSuper(TranscriptEditor);function TranscriptEditor(props){var _this;_classCallCheck(this,TranscriptEditor);_this=_super.call(this,props);_this.shouldComponentUpdate=function(nextProps,nextState){if(nextProps.mediaUrl!==_this.props.mediaUrl){return true;}return nextState!==_this.state;};_this.componentDidMount=function(){_this.updateDimensions();window.addEventListener(\"resize\",_this.updateDimensions);};_this.updateDimensions=function(){var gridDisplay={display:\"grid\",gridTemplateColumns:\"1fr 3fr\",gridColumnGap:\"1em\"};var displayMedia=null;// if the mediaUrl is for an audio file, then extend TimedTextEditor to be full width\nif(_this.props.mediaType===\"audio\"){console.log(\"this.props.mediaType\",_this.props.mediaType);gridDisplay=null;displayMedia={display:\"none\"};}// Handeling mobile view\nvar width=Math.max(document.documentElement.clientWidth,window.innerWidth||0);if(width<=767){gridDisplay=null;}_this.setState({gridDisplay:gridDisplay,displayMedia:displayMedia});};_this.handleWordClick=function(startTime){if(_this.props.handleAnalyticsEvents){_this.props.handleAnalyticsEvents({category:\"TranscriptEditor\",action:\"doubleClickOnWord\",name:\"startTime\",value:secondsToTimecode(startTime)});}_this.setCurrentTime(startTime);};_this.handleTimeUpdate=function(e){var currentTime=e.target.currentTime;_this.setState({currentTime:currentTime});};_this.handlePlayMedia=function(isPlaying){_this.playMedia(isPlaying);};_this.handleIsPlaying=function(){return _this.isPlaying();};_this.handleIsScrollIntoViewChange=function(e){var isChecked=e.target.checked;_this.setState({isScrollIntoViewOn:isChecked});if(_this.props.handleAnalyticsEvents){_this.props.handleAnalyticsEvents({category:\"TranscriptEditor\",action:\"handleIsScrollIntoViewChange\",name:\"isScrollIntoViewOn\",value:isChecked});}};_this.handlePauseWhileTyping=function(e){var isChecked=e.target.checked;_this.setState({isPauseWhileTypingOn:isChecked});if(_this.props.handleAnalyticsEvents){_this.props.handleAnalyticsEvents({category:\"TranscriptEditor\",action:\"handlePauseWhileTyping\",name:\"isPauseWhileTypingOn\",value:isChecked});}};_this.handleRollBackValueInSeconds=function(e){var rollBackValue=e.target.value;_this.setState({rollBackValueInSeconds:rollBackValue});if(_this.props.handleAnalyticsEvents){_this.props.handleAnalyticsEvents({category:\"TranscriptEditor\",action:\"handleRollBackValueInSeconds\",name:\"rollBackValueInSeconds\",value:rollBackValue});}};_this.handleSetTimecodeOffset=function(timecodeOffset){_this.setState({timecodeOffset:timecodeOffset},function(){_this.timedTextEditorRef.current.forceUpdate();});};_this.handleShowTimecodes=function(e){var isChecked=e.target.checked;_this.setState({showTimecodes:isChecked});if(_this.props.handleAnalyticsEvents){_this.props.handleAnalyticsEvents({category:\"TranscriptEditor\",action:\"handleShowTimecodes\",name:\"showTimecodes\",value:isChecked});}};_this.handleShowSpeakers=function(e){var isChecked=e.target.checked;_this.setState({showSpeakers:isChecked});if(_this.props.handleAnalyticsEvents){_this.props.handleAnalyticsEvents({category:\"TranscriptEditor\",action:\"handleShowSpeakers\",name:\"showSpeakers\",value:isChecked});}};_this.handleSettingsToggle=function(){_this.setState(function(prevState){return{showSettings:!prevState.showSettings};},function(){if(_this.props.handleAnalyticsEvents){_this.props.handleAnalyticsEvents({category:\"TranscriptEditor\",action:\"handleSettingsToggle\",name:\"showSettings\",value:!_this.state.showSettings});}});};_this.handleShortcutsToggle=function(){_this.setState(function(prevState){return{showShortcuts:!prevState.showShortcuts};},function(){if(_this.props.handleAnalyticsEvents){_this.props.handleAnalyticsEvents({category:\"TranscriptEditor\",action:\"handleShortcutsToggle\",name:\"showShortcuts\",value:!_this.state.showShortcuts});}});};_this.handleExportToggle=function(){console.log(\"handleExportToggle\",_this.state.showExportOptions);_this.setState(function(prevState){return{showExportOptions:!prevState.showExportOptions};},function(){if(_this.props.handleAnalyticsEvents){_this.props.handleAnalyticsEvents({category:\"TranscriptEditor\",action:\"handleExportToggle\",name:\"showExportOptions\",value:!_this.state.showExportOptions});}});};_this.handleExportOptionsChange=function(e){var exportFormat=e.target.value;console.log(\"export format: \"+exportFormat);if(exportFormat!==\"instructions\"){var fileName=_this.props.title?_this.props.title:_this.props.mediaUrl;console.log(\"STILL HERE \");var _this$getEditorConten=_this.getEditorContent(exportFormat),data=_this$getEditorConten.data,ext=_this$getEditorConten.ext;console.log(\"ext1: \"+ext);var tmpData=data;console.log(\"tmp data: \"+tmpData);if(ext===\"json\"){tmpData=JSON.stringify(data,null,2);}console.log(\"fileName: \"+fileName);console.log(\"ext2: \"+ext);if(ext!==\"docx\"){_this.download(tmpData,\"\".concat(fileName,\".\").concat(ext));}if(_this.props.handleAnalyticsEvents){_this.props.handleAnalyticsEvents({category:\"TranscriptEditor\",action:\"handleExportOptionsChange\",name:\"exportFile\",value:exportFormat});}}};_this.download=function(content,filename,contentType){var type=contentType||\"application/octet-stream\";var link=document.createElement(\"a\");var blob=new Blob([content],{type:type});link.href=window.URL.createObjectURL(blob);link.download=filename;// Firefox fix - cannot do link.click() if it's not attached to DOM in firefox\n// https://stackoverflow.com/questions/32225904/programmatical-click-on-a-tag-not-working-in-firefox\ndocument.body.appendChild(link);link.click();document.body.removeChild(link);};_this.getEditorContent=function(exportFormat){var title=_this.props.title?_this.props.title:\"\";console.log(\"exportFormat: \"+exportFormat);console.log(\"title: \"+title);return _this.timedTextEditorRef.current.getEditorContent(exportFormat,title);};_this.handlePreviewIsDisplayed=function(){_this.setState({previewIsDisplayed:!_this.state.previewIsDisplayed});};_this.onLoadedDataGetDuration=function(e){var currentDuration=e.target.duration;var currentDurationWithOffset=currentDuration+_this.state.timecodeOffset;var durationInSeconds=secondsToTimecode(currentDurationWithOffset);_this.setState({mediaDuration:durationInSeconds});if(_this.props.handleAnalyticsEvents){_this.props.handleAnalyticsEvents({category:\"TranscriptEditor\",action:\"onLoadedDataGetDuration\",name:\"durationInSeconds-WithoutOffset\",value:secondsToTimecode(currentDuration)});}};_this.handleChangePreviewViewWidth=function(e){var newPreviewViewWidth=e.target.value;_this.setState({previewViewWidth:newPreviewViewWidth});};_this.handleAutoSaveChanges=function(data){// making `TranscriptEditor` - `handleAutoSaveChanges` optional\nif(_this.props.handleAutoSaveChanges){_this.props.handleAutoSaveChanges(data);}};_this.videoRef=React.createRef();_this.state={currentTime:0,transcriptJSONBlob:null,isScrollIntoViewOn:false,showSettings:false,showShortcuts:false,showExportOptions:false,isPauseWhileTypingOn:true,rollBackValueInSeconds:15,timecodeOffset:0,showTimecodes:true,showSpeakers:true,previewIsDisplayed:true,mediaDuration:\"00:00:00:00\",gridDisplay:null};_this.timedTextEditorRef=React.createRef();return _this;}_createClass(TranscriptEditor,[{key:\"render\",value:function render(){var _this2=this;var videoPlayer=/*#__PURE__*/React.createElement(VideoPlayer,{mediaUrl:this.props.mediaUrl,onTimeUpdate:this.handleTimeUpdate,videoRef:this.videoRef,previewIsDisplayed:this.state.previewIsDisplayed,onLoadedDataGetDuration:this.onLoadedDataGetDuration});var mediaControls=/*#__PURE__*/React.createElement(MediaPlayer,{title:this.props.title?this.props.title:\"\",mediaDuration:this.state.mediaDuration,currentTime:this.state.currentTime,hookSeek:function hookSeek(foo){return _this2.setCurrentTime=foo;},hookPlayMedia:function hookPlayMedia(foo){return _this2.playMedia=foo;},hookIsPlaying:function hookIsPlaying(foo){return _this2.isPlaying=foo;},rollBackValueInSeconds:this.state.rollBackValueInSeconds,timecodeOffset:this.state.timecodeOffset,mediaUrl:this.props.mediaUrl,handleAnalyticsEvents:this.props.handleAnalyticsEvents,videoRef:this.videoRef});var settings=/*#__PURE__*/React.createElement(Settings,{handleSettingsToggle:this.handleSettingsToggle,defaultValuePauseWhileTyping:this.state.isPauseWhileTypingOn,defaultValueScrollSync:this.state.isScrollIntoViewOn,defaultRollBackValueInSeconds:this.state.rollBackValueInSeconds,timecodeOffset:this.state.timecodeOffset,showTimecodes:this.state.showTimecodes,showSpeakers:this.state.showSpeakers,handlePauseWhileTyping:this.handlePauseWhileTyping,handleIsScrollIntoViewChange:this.handleIsScrollIntoViewChange,handleRollBackValueInSeconds:this.handleRollBackValueInSeconds,handleSetTimecodeOffset:this.handleSetTimecodeOffset,handleShowTimecodes:this.handleShowTimecodes,handleShowSpeakers:this.handleShowSpeakers,handleAnalyticsEvents:this.props.handleAnalyticsEvents,previewIsDisplayed:this.state.previewIsDisplayed,handlePreviewIsDisplayed:this.handlePreviewIsDisplayed,handleChangePreviewViewWidth:this.handleChangePreviewViewWidth});var exportOptions=/*#__PURE__*/React.createElement(ExportOptions,{exportOptionsList:exportOptionsList,handleExportOptionsChange:this.handleExportOptionsChange,handleExportToggle:this.handleExportToggle});var shortcuts=/*#__PURE__*/React.createElement(Shortcuts,{handleShortcutsToggle:this.handleShortcutsToggle});// export format for `handleAutoSaveChanges` is assigned with `autoSaveContentType`\n// but if that's not specified  it looks at  `sttJsonType`\n// if that's not specified either, it falls back on `draftjs`.\nvar contentFormat=\"draftjs\";if(this.props.autoSaveContentType){contentFormat=this.props.autoSaveContentType;}else if(this.props.sttJsonType){contentFormat=this.props.sttJsonType;}var timedTextEditor=/*#__PURE__*/React.createElement(TimedTextEditor,{fileName:this.props.fileName,transcriptData:this.state.transcriptJSONBlob,timecodeOffset:this.state.timecodeOffset,onWordClick:this.handleWordClick,playMedia:this.handlePlayMedia,isPlaying:this.handleIsPlaying,currentTime:this.state.currentTime,isEditable:this.props.isEditable,spellCheck:this.props.spellCheck,sttJsonType:this.props.sttJsonType,mediaUrl:this.props.mediaUrl,isScrollIntoViewOn:this.state.isScrollIntoViewOn,isPauseWhileTypingOn:this.state.isPauseWhileTypingOn,showTimecodes:this.state.showTimecodes,showSpeakers:this.state.showSpeakers,ref:this.timedTextEditorRef,handleAnalyticsEvents:this.props.handleAnalyticsEvents,handleAutoSaveChanges:this.handleAutoSaveChanges,autoSaveContentType:contentFormat,title:this.props.title?this.props.title:Date.now()});var header=/*#__PURE__*/React.createElement(Header,{showSettings:this.state.showSettings,showShortcuts:this.state.showShortcuts,showExportOptions:this.state.showExportOptions,settings:settings,shortcuts:shortcuts,exportOptions:exportOptions,tooltip:HowDoesThisWork,mediaUrl:this.props.mediaUrl,mediaControls:this.videoRef.current?mediaControls:null,handleSettingsToggle:this.handleSettingsToggle,handleShortcutsToggle:this.handleShortcutsToggle,handleExportToggle:this.handleExportToggle});return/*#__PURE__*/React.createElement(\"div\",{className:style.container},this.props.mediaUrl?header:null,/*#__PURE__*/React.createElement(\"div\",{className:style.grid},/*#__PURE__*/React.createElement(\"section\",{className:style.row,style:this.state.gridDisplay},/*#__PURE__*/React.createElement(\"aside\",{className:style.aside,style:this.state.displayMedia},this.props.mediaUrl?videoPlayer:null),/*#__PURE__*/React.createElement(\"main\",{className:this.props.mediaType===\"audio\"?style.mainWithAudiio:style.main},this.props.mediaUrl&&this.props.transcriptJSONBlob?timedTextEditor:null))));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(nextProps){if(nextProps.transcriptJSONBlob!==null){return{transcriptJSONBlob:nextProps.transcriptJSONBlob};}return null;}// performance optimization\n}]);return TranscriptEditor;}(React.Component);export default TranscriptEditor;","map":{"version":3,"sources":["/home/cmsgdiav/Desktop/React Projects/aws-transcription-assistant-05/packages/frontend/src/packages/components/transcript-editor/index.js"],"names":["React","TimedTextEditor","MediaPlayer","VideoPlayer","Settings","Shortcuts","secondsToTimecode","Header","ExportOptions","style","HowDoesThisWork","exportOptionsList","value","label","TranscriptEditor","props","shouldComponentUpdate","nextProps","nextState","mediaUrl","state","componentDidMount","updateDimensions","window","addEventListener","gridDisplay","display","gridTemplateColumns","gridColumnGap","displayMedia","mediaType","console","log","width","Math","max","document","documentElement","clientWidth","innerWidth","setState","handleWordClick","startTime","handleAnalyticsEvents","category","action","name","setCurrentTime","handleTimeUpdate","e","currentTime","target","handlePlayMedia","isPlaying","playMedia","handleIsPlaying","handleIsScrollIntoViewChange","isChecked","checked","isScrollIntoViewOn","handlePauseWhileTyping","isPauseWhileTypingOn","handleRollBackValueInSeconds","rollBackValue","rollBackValueInSeconds","handleSetTimecodeOffset","timecodeOffset","timedTextEditorRef","current","forceUpdate","handleShowTimecodes","showTimecodes","handleShowSpeakers","showSpeakers","handleSettingsToggle","prevState","showSettings","handleShortcutsToggle","showShortcuts","handleExportToggle","showExportOptions","handleExportOptionsChange","exportFormat","fileName","title","getEditorContent","data","ext","tmpData","JSON","stringify","download","content","filename","contentType","type","link","createElement","blob","Blob","href","URL","createObjectURL","body","appendChild","click","removeChild","handlePreviewIsDisplayed","previewIsDisplayed","onLoadedDataGetDuration","currentDuration","duration","currentDurationWithOffset","durationInSeconds","mediaDuration","handleChangePreviewViewWidth","newPreviewViewWidth","previewViewWidth","handleAutoSaveChanges","videoRef","createRef","transcriptJSONBlob","videoPlayer","mediaControls","foo","settings","exportOptions","shortcuts","contentFormat","autoSaveContentType","sttJsonType","timedTextEditor","isEditable","spellCheck","Date","now","header","container","grid","row","aside","mainWithAudiio","main","Component"],"mappings":"4tBAAA;AAEA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAGA,MAAOC,CAAAA,eAAP,KAA4B,sBAA5B,CACA,MAAOC,CAAAA,WAAP,KAAwB,iBAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,iBAAxB,CACA,MAAOC,CAAAA,QAAP,KAAqB,aAArB,CACA,MAAOC,CAAAA,SAAP,KAAsB,uBAAtB,CACA,OAASC,iBAAT,KAAkC,+BAAlC,CACA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,CACA,MAAOC,CAAAA,aAAP,KAA0B,wBAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,oBAAlB,CAEA;AACA,MAAOC,CAAAA,eAAP,KAA4B,0BAA5B,CAEA,GAAMC,CAAAA,iBAAiB,CAAG,CACxB,CAAEC,KAAK,CAAE,KAAT,CAAgBC,KAAK,CAAE,WAAvB,CADwB,CAExB,CACED,KAAK,CAAE,qBADT,CAEEC,KAAK,CAAE,yCAFT,CAFwB,CAMxB,CAAED,KAAK,CAAE,MAAT,CAAiBC,KAAK,CAAE,SAAxB,CANwB,CAOxB,CAAED,KAAK,CAAE,KAAT,CAAgBC,KAAK,CAAE,gBAAvB,CAPwB,CAQxB,CAAED,KAAK,CAAE,SAAT,CAAoBC,KAAK,CAAE,iBAA3B,CARwB,CAA1B,C,GAYMC,CAAAA,gB,gIACJ,0BAAYC,KAAZ,CAAmB,kDACjB,uBAAMA,KAAN,EADiB,MAkCnBC,qBAlCmB,CAkCK,SAACC,SAAD,CAAYC,SAAZ,CAA0B,CAChD,GAAID,SAAS,CAACE,QAAV,GAAuB,MAAKJ,KAAL,CAAWI,QAAtC,CAAgD,CAC9C,MAAO,KAAP,CACD,CAED,MAAOD,CAAAA,SAAS,GAAK,MAAKE,KAA1B,CACD,CAxCkB,OA0CnBC,iBA1CmB,CA0CC,UAAM,CACxB,MAAKC,gBAAL,GACAC,MAAM,CAACC,gBAAP,CAAwB,QAAxB,CAAkC,MAAKF,gBAAvC,EACD,CA7CkB,OA+CnBA,gBA/CmB,CA+CA,UAAM,CACvB,GAAIG,CAAAA,WAAW,CAAG,CAChBC,OAAO,CAAE,MADO,CAEhBC,mBAAmB,CAAE,SAFL,CAGhBC,aAAa,CAAE,KAHC,CAAlB,CAKA,GAAIC,CAAAA,YAAY,CAAG,IAAnB,CACA;AACA,GAAI,MAAKd,KAAL,CAAWe,SAAX,GAAyB,OAA7B,CAAsC,CACpCC,OAAO,CAACC,GAAR,CAAY,sBAAZ,CAAoC,MAAKjB,KAAL,CAAWe,SAA/C,EACAL,WAAW,CAAG,IAAd,CACAI,YAAY,CAAG,CAAEH,OAAO,CAAE,MAAX,CAAf,CACD,CACD;AACA,GAAMO,CAAAA,KAAK,CAAGC,IAAI,CAACC,GAAL,CACZC,QAAQ,CAACC,eAAT,CAAyBC,WADb,CAEZf,MAAM,CAACgB,UAAP,EAAqB,CAFT,CAAd,CAIA,GAAIN,KAAK,EAAI,GAAb,CAAkB,CAChBR,WAAW,CAAG,IAAd,CACD,CACD,MAAKe,QAAL,CAAc,CACZf,WAAW,CAAXA,WADY,CAEZI,YAAY,CAAZA,YAFY,CAAd,EAID,CAxEkB,OA2EnBY,eA3EmB,CA2ED,SAAAC,SAAS,CAAI,CAC7B,GAAI,MAAK3B,KAAL,CAAW4B,qBAAf,CAAsC,CACpC,MAAK5B,KAAL,CAAW4B,qBAAX,CAAiC,CAC/BC,QAAQ,CAAE,kBADqB,CAE/BC,MAAM,CAAE,mBAFuB,CAG/BC,IAAI,CAAE,WAHyB,CAI/BlC,KAAK,CAAEN,iBAAiB,CAACoC,SAAD,CAJO,CAAjC,EAMD,CAED,MAAKK,cAAL,CAAoBL,SAApB,EACD,CAtFkB,OAyFnBM,gBAzFmB,CAyFA,SAAAC,CAAC,CAAI,CACtB,GAAMC,CAAAA,WAAW,CAAGD,CAAC,CAACE,MAAF,CAASD,WAA7B,CACA,MAAKV,QAAL,CAAc,CACZU,WAAW,CAAXA,WADY,CAAd,EAGD,CA9FkB,OAgGnBE,eAhGmB,CAgGD,SAAAC,SAAS,CAAI,CAC7B,MAAKC,SAAL,CAAeD,SAAf,EACD,CAlGkB,OAoGnBE,eApGmB,CAoGD,UAAM,CACtB,MAAO,OAAKF,SAAL,EAAP,CACD,CAtGkB,OAwGnBG,4BAxGmB,CAwGY,SAAAP,CAAC,CAAI,CAClC,GAAMQ,CAAAA,SAAS,CAAGR,CAAC,CAACE,MAAF,CAASO,OAA3B,CACA,MAAKlB,QAAL,CAAc,CAAEmB,kBAAkB,CAAEF,SAAtB,CAAd,EAEA,GAAI,MAAK1C,KAAL,CAAW4B,qBAAf,CAAsC,CACpC,MAAK5B,KAAL,CAAW4B,qBAAX,CAAiC,CAC/BC,QAAQ,CAAE,kBADqB,CAE/BC,MAAM,CAAE,8BAFuB,CAG/BC,IAAI,CAAE,oBAHyB,CAI/BlC,KAAK,CAAE6C,SAJwB,CAAjC,EAMD,CACF,CApHkB,OAqHnBG,sBArHmB,CAqHM,SAAAX,CAAC,CAAI,CAC5B,GAAMQ,CAAAA,SAAS,CAAGR,CAAC,CAACE,MAAF,CAASO,OAA3B,CACA,MAAKlB,QAAL,CAAc,CAAEqB,oBAAoB,CAAEJ,SAAxB,CAAd,EAEA,GAAI,MAAK1C,KAAL,CAAW4B,qBAAf,CAAsC,CACpC,MAAK5B,KAAL,CAAW4B,qBAAX,CAAiC,CAC/BC,QAAQ,CAAE,kBADqB,CAE/BC,MAAM,CAAE,wBAFuB,CAG/BC,IAAI,CAAE,sBAHyB,CAI/BlC,KAAK,CAAE6C,SAJwB,CAAjC,EAMD,CACF,CAjIkB,OAmInBK,4BAnImB,CAmIY,SAAAb,CAAC,CAAI,CAClC,GAAMc,CAAAA,aAAa,CAAGd,CAAC,CAACE,MAAF,CAASvC,KAA/B,CACA,MAAK4B,QAAL,CAAc,CAAEwB,sBAAsB,CAAED,aAA1B,CAAd,EAEA,GAAI,MAAKhD,KAAL,CAAW4B,qBAAf,CAAsC,CACpC,MAAK5B,KAAL,CAAW4B,qBAAX,CAAiC,CAC/BC,QAAQ,CAAE,kBADqB,CAE/BC,MAAM,CAAE,8BAFuB,CAG/BC,IAAI,CAAE,wBAHyB,CAI/BlC,KAAK,CAAEmD,aAJwB,CAAjC,EAMD,CACF,CA/IkB,OAiJnBE,uBAjJmB,CAiJO,SAAAC,cAAc,CAAI,CAC1C,MAAK1B,QAAL,CAAc,CAAE0B,cAAc,CAAEA,cAAlB,CAAd,CAAkD,UAAM,CACtD,MAAKC,kBAAL,CAAwBC,OAAxB,CAAgCC,WAAhC,GACD,CAFD,EAGD,CArJkB,OAuJnBC,mBAvJmB,CAuJG,SAAArB,CAAC,CAAI,CACzB,GAAMQ,CAAAA,SAAS,CAAGR,CAAC,CAACE,MAAF,CAASO,OAA3B,CACA,MAAKlB,QAAL,CAAc,CAAE+B,aAAa,CAAEd,SAAjB,CAAd,EAEA,GAAI,MAAK1C,KAAL,CAAW4B,qBAAf,CAAsC,CACpC,MAAK5B,KAAL,CAAW4B,qBAAX,CAAiC,CAC/BC,QAAQ,CAAE,kBADqB,CAE/BC,MAAM,CAAE,qBAFuB,CAG/BC,IAAI,CAAE,eAHyB,CAI/BlC,KAAK,CAAE6C,SAJwB,CAAjC,EAMD,CACF,CAnKkB,OAqKnBe,kBArKmB,CAqKE,SAAAvB,CAAC,CAAI,CACxB,GAAMQ,CAAAA,SAAS,CAAGR,CAAC,CAACE,MAAF,CAASO,OAA3B,CACA,MAAKlB,QAAL,CAAc,CAAEiC,YAAY,CAAEhB,SAAhB,CAAd,EAEA,GAAI,MAAK1C,KAAL,CAAW4B,qBAAf,CAAsC,CACpC,MAAK5B,KAAL,CAAW4B,qBAAX,CAAiC,CAC/BC,QAAQ,CAAE,kBADqB,CAE/BC,MAAM,CAAE,oBAFuB,CAG/BC,IAAI,CAAE,cAHyB,CAI/BlC,KAAK,CAAE6C,SAJwB,CAAjC,EAMD,CACF,CAjLkB,OAmLnBiB,oBAnLmB,CAmLI,UAAM,CAC3B,MAAKlC,QAAL,CACE,SAAAmC,SAAS,QAAK,CACZC,YAAY,CAAE,CAACD,SAAS,CAACC,YADb,CAAL,EADX,CAIE,UAAM,CACJ,GAAI,MAAK7D,KAAL,CAAW4B,qBAAf,CAAsC,CACpC,MAAK5B,KAAL,CAAW4B,qBAAX,CAAiC,CAC/BC,QAAQ,CAAE,kBADqB,CAE/BC,MAAM,CAAE,sBAFuB,CAG/BC,IAAI,CAAE,cAHyB,CAI/BlC,KAAK,CAAE,CAAC,MAAKQ,KAAL,CAAWwD,YAJY,CAAjC,EAMD,CACF,CAbH,EAeD,CAnMkB,OAqMnBC,qBArMmB,CAqMK,UAAM,CAC5B,MAAKrC,QAAL,CACE,SAAAmC,SAAS,QAAK,CACZG,aAAa,CAAE,CAACH,SAAS,CAACG,aADd,CAAL,EADX,CAIE,UAAM,CACJ,GAAI,MAAK/D,KAAL,CAAW4B,qBAAf,CAAsC,CACpC,MAAK5B,KAAL,CAAW4B,qBAAX,CAAiC,CAC/BC,QAAQ,CAAE,kBADqB,CAE/BC,MAAM,CAAE,uBAFuB,CAG/BC,IAAI,CAAE,eAHyB,CAI/BlC,KAAK,CAAE,CAAC,MAAKQ,KAAL,CAAW0D,aAJY,CAAjC,EAMD,CACF,CAbH,EAeD,CArNkB,OAuNnBC,kBAvNmB,CAuNE,UAAM,CACzBhD,OAAO,CAACC,GAAR,CAAY,oBAAZ,CAAkC,MAAKZ,KAAL,CAAW4D,iBAA7C,EACA,MAAKxC,QAAL,CACE,SAAAmC,SAAS,QAAK,CACZK,iBAAiB,CAAE,CAACL,SAAS,CAACK,iBADlB,CAAL,EADX,CAIE,UAAM,CACJ,GAAI,MAAKjE,KAAL,CAAW4B,qBAAf,CAAsC,CACpC,MAAK5B,KAAL,CAAW4B,qBAAX,CAAiC,CAC/BC,QAAQ,CAAE,kBADqB,CAE/BC,MAAM,CAAE,oBAFuB,CAG/BC,IAAI,CAAE,mBAHyB,CAI/BlC,KAAK,CAAE,CAAC,MAAKQ,KAAL,CAAW4D,iBAJY,CAAjC,EAMD,CACF,CAbH,EAeD,CAxOkB,OA0OnBC,yBA1OmB,CA0OS,SAAAhC,CAAC,CAAI,CAC/B,GAAMiC,CAAAA,YAAY,CAAGjC,CAAC,CAACE,MAAF,CAASvC,KAA9B,CACAmB,OAAO,CAACC,GAAR,CAAY,kBAAoBkD,YAAhC,EAEA,GAAIA,YAAY,GAAK,cAArB,CAAqC,CACnC,GAAMC,CAAAA,QAAQ,CAAG,MAAKpE,KAAL,CAAWqE,KAAX,CACb,MAAKrE,KAAL,CAAWqE,KADE,CAEb,MAAKrE,KAAL,CAAWI,QAFf,CAKEY,OAAO,CAACC,GAAR,CAAY,aAAZ,EANiC,0BAOb,MAAKqD,gBAAL,CAAsBH,YAAtB,CAPa,CAO3BI,IAP2B,uBAO3BA,IAP2B,CAOrBC,GAPqB,uBAOrBA,GAPqB,CAQnCxD,OAAO,CAACC,GAAR,CAAY,SAAWuD,GAAvB,EACA,GAAIC,CAAAA,OAAO,CAAGF,IAAd,CACAvD,OAAO,CAACC,GAAR,CAAY,aAAewD,OAA3B,EAEA,GAAID,GAAG,GAAK,MAAZ,CAAoB,CAClBC,OAAO,CAAGC,IAAI,CAACC,SAAL,CAAeJ,IAAf,CAAqB,IAArB,CAA2B,CAA3B,CAAV,CACD,CACDvD,OAAO,CAACC,GAAR,CAAY,aAAemD,QAA3B,EACApD,OAAO,CAACC,GAAR,CAAY,SAAWuD,GAAvB,EAEA,GAAIA,GAAG,GAAK,MAAZ,CAAoB,CAClB,MAAKI,QAAL,CAAcH,OAAd,WAA0BL,QAA1B,aAAsCI,GAAtC,GACD,CAED,GAAI,MAAKxE,KAAL,CAAW4B,qBAAf,CAAsC,CACpC,MAAK5B,KAAL,CAAW4B,qBAAX,CAAiC,CAC/BC,QAAQ,CAAE,kBADqB,CAE/BC,MAAM,CAAE,2BAFuB,CAG/BC,IAAI,CAAE,YAHyB,CAI/BlC,KAAK,CAAEsE,YAJwB,CAAjC,EAMD,CACF,CACF,CA7QkB,OAgRnBS,QAhRmB,CAgRR,SAACC,OAAD,CAAUC,QAAV,CAAoBC,WAApB,CAAoC,CAC7C,GAAMC,CAAAA,IAAI,CAAGD,WAAW,EAAI,0BAA5B,CACA,GAAME,CAAAA,IAAI,CAAG5D,QAAQ,CAAC6D,aAAT,CAAuB,GAAvB,CAAb,CACA,GAAMC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,IAAJ,CAAS,CAACP,OAAD,CAAT,CAAoB,CAAEG,IAAI,CAAEA,IAAR,CAApB,CAAb,CAEAC,IAAI,CAACI,IAAL,CAAY7E,MAAM,CAAC8E,GAAP,CAAWC,eAAX,CAA2BJ,IAA3B,CAAZ,CACAF,IAAI,CAACL,QAAL,CAAgBE,QAAhB,CACA;AACA;AACAzD,QAAQ,CAACmE,IAAT,CAAcC,WAAd,CAA0BR,IAA1B,EACAA,IAAI,CAACS,KAAL,GACArE,QAAQ,CAACmE,IAAT,CAAcG,WAAd,CAA0BV,IAA1B,EACD,CA5RkB,OA8RnBX,gBA9RmB,CA8RA,SAAAH,YAAY,CAAI,CACjC,GAAME,CAAAA,KAAK,CAAG,MAAKrE,KAAL,CAAWqE,KAAX,CAAmB,MAAKrE,KAAL,CAAWqE,KAA9B,CAAsC,EAApD,CACArD,OAAO,CAACC,GAAR,CAAY,iBAAmBkD,YAA/B,EACAnD,OAAO,CAACC,GAAR,CAAY,UAAYoD,KAAxB,EACA,MAAO,OAAKjB,kBAAL,CAAwBC,OAAxB,CAAgCiB,gBAAhC,CACLH,YADK,CAELE,KAFK,CAAP,CAID,CAtSkB,OAwSnBuB,wBAxSmB,CAwSQ,UAAM,CAC/B,MAAKnE,QAAL,CAAc,CACZoE,kBAAkB,CAAE,CAAC,MAAKxF,KAAL,CAAWwF,kBADpB,CAAd,EAGD,CA5SkB,OA8SnBC,uBA9SmB,CA8SO,SAAA5D,CAAC,CAAI,CAC7B,GAAM6D,CAAAA,eAAe,CAAG7D,CAAC,CAACE,MAAF,CAAS4D,QAAjC,CACA,GAAMC,CAAAA,yBAAyB,CAC7BF,eAAe,CAAG,MAAK1F,KAAL,CAAW8C,cAD/B,CAEA,GAAM+C,CAAAA,iBAAiB,CAAG3G,iBAAiB,CAAC0G,yBAAD,CAA3C,CAEA,MAAKxE,QAAL,CAAc,CACZ0E,aAAa,CAAED,iBADH,CAAd,EAIA,GAAI,MAAKlG,KAAL,CAAW4B,qBAAf,CAAsC,CACpC,MAAK5B,KAAL,CAAW4B,qBAAX,CAAiC,CAC/BC,QAAQ,CAAE,kBADqB,CAE/BC,MAAM,CAAE,yBAFuB,CAG/BC,IAAI,CAAE,iCAHyB,CAI/BlC,KAAK,CAAEN,iBAAiB,CAACwG,eAAD,CAJO,CAAjC,EAMD,CACF,CAhUkB,OAkUnBK,4BAlUmB,CAkUY,SAAAlE,CAAC,CAAI,CAClC,GAAMmE,CAAAA,mBAAmB,CAAGnE,CAAC,CAACE,MAAF,CAASvC,KAArC,CACA,MAAK4B,QAAL,CAAc,CACZ6E,gBAAgB,CAAED,mBADN,CAAd,EAGD,CAvUkB,OAyUnBE,qBAzUmB,CAyUK,SAAAhC,IAAI,CAAI,CAC9B;AACA,GAAI,MAAKvE,KAAL,CAAWuG,qBAAf,CAAsC,CACpC,MAAKvG,KAAL,CAAWuG,qBAAX,CAAiChC,IAAjC,EACD,CACF,CA9UkB,CAEjB,MAAKiC,QAAL,CAAgBvH,KAAK,CAACwH,SAAN,EAAhB,CAEA,MAAKpG,KAAL,CAAa,CACX8B,WAAW,CAAE,CADF,CAEXuE,kBAAkB,CAAE,IAFT,CAGX9D,kBAAkB,CAAE,KAHT,CAIXiB,YAAY,CAAE,KAJH,CAKXE,aAAa,CAAE,KALJ,CAMXE,iBAAiB,CAAE,KANR,CAOXnB,oBAAoB,CAAE,IAPX,CAQXG,sBAAsB,CAAE,EARb,CASXE,cAAc,CAAE,CATL,CAUXK,aAAa,CAAE,IAVJ,CAWXE,YAAY,CAAE,IAXH,CAYXmC,kBAAkB,CAAE,IAZT,CAaXM,aAAa,CAAE,aAbJ,CAcXzF,WAAW,CAAE,IAdF,CAAb,CAgBA,MAAK0C,kBAAL,CAA0BnE,KAAK,CAACwH,SAAN,EAA1B,CApBiB,aAqBlB,C,oEA2TQ,iBACP,GAAME,CAAAA,WAAW,cACf,oBAAC,WAAD,EACE,QAAQ,CAAE,KAAK3G,KAAL,CAAWI,QADvB,CAEE,YAAY,CAAE,KAAK6B,gBAFrB,CAGE,QAAQ,CAAE,KAAKuE,QAHjB,CAIE,kBAAkB,CAAE,KAAKnG,KAAL,CAAWwF,kBAJjC,CAKE,uBAAuB,CAAE,KAAKC,uBALhC,EADF,CAUA,GAAMc,CAAAA,aAAa,cACjB,oBAAC,WAAD,EACE,KAAK,CAAE,KAAK5G,KAAL,CAAWqE,KAAX,CAAmB,KAAKrE,KAAL,CAAWqE,KAA9B,CAAsC,EAD/C,CAEE,aAAa,CAAE,KAAKhE,KAAL,CAAW8F,aAF5B,CAGE,WAAW,CAAE,KAAK9F,KAAL,CAAW8B,WAH1B,CAIE,QAAQ,CAAE,kBAAA0E,GAAG,QAAK,CAAA,MAAI,CAAC7E,cAAL,CAAsB6E,GAA3B,EAJf,CAKE,aAAa,CAAE,uBAAAA,GAAG,QAAK,CAAA,MAAI,CAACtE,SAAL,CAAiBsE,GAAtB,EALpB,CAME,aAAa,CAAE,uBAAAA,GAAG,QAAK,CAAA,MAAI,CAACvE,SAAL,CAAiBuE,GAAtB,EANpB,CAOE,sBAAsB,CAAE,KAAKxG,KAAL,CAAW4C,sBAPrC,CAQE,cAAc,CAAE,KAAK5C,KAAL,CAAW8C,cAR7B,CASE,QAAQ,CAAE,KAAKnD,KAAL,CAAWI,QATvB,CAUE,qBAAqB,CAAE,KAAKJ,KAAL,CAAW4B,qBAVpC,CAWE,QAAQ,CAAE,KAAK4E,QAXjB,EADF,CAgBA,GAAMM,CAAAA,QAAQ,cACZ,oBAAC,QAAD,EACE,oBAAoB,CAAE,KAAKnD,oBAD7B,CAEE,4BAA4B,CAAE,KAAKtD,KAAL,CAAWyC,oBAF3C,CAGE,sBAAsB,CAAE,KAAKzC,KAAL,CAAWuC,kBAHrC,CAIE,6BAA6B,CAAE,KAAKvC,KAAL,CAAW4C,sBAJ5C,CAKE,cAAc,CAAE,KAAK5C,KAAL,CAAW8C,cAL7B,CAME,aAAa,CAAE,KAAK9C,KAAL,CAAWmD,aAN5B,CAOE,YAAY,CAAE,KAAKnD,KAAL,CAAWqD,YAP3B,CAQE,sBAAsB,CAAE,KAAKb,sBAR/B,CASE,4BAA4B,CAAE,KAAKJ,4BATrC,CAUE,4BAA4B,CAAE,KAAKM,4BAVrC,CAWE,uBAAuB,CAAE,KAAKG,uBAXhC,CAYE,mBAAmB,CAAE,KAAKK,mBAZ5B,CAaE,kBAAkB,CAAE,KAAKE,kBAb3B,CAcE,qBAAqB,CAAE,KAAKzD,KAAL,CAAW4B,qBAdpC,CAeE,kBAAkB,CAAE,KAAKvB,KAAL,CAAWwF,kBAfjC,CAgBE,wBAAwB,CAAE,KAAKD,wBAhBjC,CAiBE,4BAA4B,CAAE,KAAKQ,4BAjBrC,EADF,CAsBA,GAAMW,CAAAA,aAAa,cACjB,oBAAC,aAAD,EACE,iBAAiB,CAAEnH,iBADrB,CAEE,yBAAyB,CAAE,KAAKsE,yBAFlC,CAGE,kBAAkB,CAAE,KAAKF,kBAH3B,EADF,CAQA,GAAMgD,CAAAA,SAAS,cACb,oBAAC,SAAD,EAAW,qBAAqB,CAAE,KAAKlD,qBAAvC,EADF,CAIA;AACA;AACA;AACA,GAAImD,CAAAA,aAAa,CAAG,SAApB,CACA,GAAI,KAAKjH,KAAL,CAAWkH,mBAAf,CAAoC,CAClCD,aAAa,CAAG,KAAKjH,KAAL,CAAWkH,mBAA3B,CACD,CAFD,IAEO,IAAI,KAAKlH,KAAL,CAAWmH,WAAf,CAA4B,CACjCF,aAAa,CAAG,KAAKjH,KAAL,CAAWmH,WAA3B,CACD,CAED,GAAMC,CAAAA,eAAe,cACnB,oBAAC,eAAD,EACE,QAAQ,CAAE,KAAKpH,KAAL,CAAWoE,QADvB,CAEE,cAAc,CAAE,KAAK/D,KAAL,CAAWqG,kBAF7B,CAGE,cAAc,CAAE,KAAKrG,KAAL,CAAW8C,cAH7B,CAIE,WAAW,CAAE,KAAKzB,eAJpB,CAKE,SAAS,CAAE,KAAKW,eALlB,CAME,SAAS,CAAE,KAAKG,eANlB,CAOE,WAAW,CAAE,KAAKnC,KAAL,CAAW8B,WAP1B,CAQE,UAAU,CAAE,KAAKnC,KAAL,CAAWqH,UARzB,CASE,UAAU,CAAE,KAAKrH,KAAL,CAAWsH,UATzB,CAUE,WAAW,CAAE,KAAKtH,KAAL,CAAWmH,WAV1B,CAWE,QAAQ,CAAE,KAAKnH,KAAL,CAAWI,QAXvB,CAYE,kBAAkB,CAAE,KAAKC,KAAL,CAAWuC,kBAZjC,CAaE,oBAAoB,CAAE,KAAKvC,KAAL,CAAWyC,oBAbnC,CAcE,aAAa,CAAE,KAAKzC,KAAL,CAAWmD,aAd5B,CAeE,YAAY,CAAE,KAAKnD,KAAL,CAAWqD,YAf3B,CAgBE,GAAG,CAAE,KAAKN,kBAhBZ,CAiBE,qBAAqB,CAAE,KAAKpD,KAAL,CAAW4B,qBAjBpC,CAkBE,qBAAqB,CAAE,KAAK2E,qBAlB9B,CAmBE,mBAAmB,CAAEU,aAnBvB,CAoBE,KAAK,CAAE,KAAKjH,KAAL,CAAWqE,KAAX,CAAmB,KAAKrE,KAAL,CAAWqE,KAA9B,CAAsCkD,IAAI,CAACC,GAAL,EApB/C,EADF,CAyBA,GAAMC,CAAAA,MAAM,cACV,oBAAC,MAAD,EACE,YAAY,CAAE,KAAKpH,KAAL,CAAWwD,YAD3B,CAEE,aAAa,CAAE,KAAKxD,KAAL,CAAW0D,aAF5B,CAGE,iBAAiB,CAAE,KAAK1D,KAAL,CAAW4D,iBAHhC,CAIE,QAAQ,CAAE6C,QAJZ,CAKE,SAAS,CAAEE,SALb,CAME,aAAa,CAAED,aANjB,CAOE,OAAO,CAAEpH,eAPX,CAQE,QAAQ,CAAE,KAAKK,KAAL,CAAWI,QARvB,CASE,aAAa,CAAE,KAAKoG,QAAL,CAAcnD,OAAd,CAAwBuD,aAAxB,CAAwC,IATzD,CAUE,oBAAoB,CAAE,KAAKjD,oBAV7B,CAWE,qBAAqB,CAAE,KAAKG,qBAX9B,CAYE,kBAAkB,CAAE,KAAKE,kBAZ3B,EADF,CAiBA,mBACE,2BAAK,SAAS,CAAEtE,KAAK,CAACgI,SAAtB,EACG,KAAK1H,KAAL,CAAWI,QAAX,CAAsBqH,MAAtB,CAA+B,IADlC,cAGE,2BAAK,SAAS,CAAE/H,KAAK,CAACiI,IAAtB,eACE,+BAAS,SAAS,CAAEjI,KAAK,CAACkI,GAA1B,CAA+B,KAAK,CAAE,KAAKvH,KAAL,CAAWK,WAAjD,eACE,6BAAO,SAAS,CAAEhB,KAAK,CAACmI,KAAxB,CAA+B,KAAK,CAAE,KAAKxH,KAAL,CAAWS,YAAjD,EACG,KAAKd,KAAL,CAAWI,QAAX,CAAsBuG,WAAtB,CAAoC,IADvC,CADF,cAKE,4BACE,SAAS,CACP,KAAK3G,KAAL,CAAWe,SAAX,GAAyB,OAAzB,CACIrB,KAAK,CAACoI,cADV,CAEIpI,KAAK,CAACqI,IAJd,EAOG,KAAK/H,KAAL,CAAWI,QAAX,EAAuB,KAAKJ,KAAL,CAAW0G,kBAAlC,CACGU,eADH,CAEG,IATN,CALF,CADF,CAHF,CADF,CAyBD,C,4EAnc+BlH,S,CAAW,CACzC,GAAIA,SAAS,CAACwG,kBAAV,GAAiC,IAArC,CAA2C,CACzC,MAAO,CACLA,kBAAkB,CAAExG,SAAS,CAACwG,kBADzB,CAAP,CAGD,CAED,MAAO,KAAP,CACD,CAED;8BAlC6BzH,KAAK,CAAC+I,S,EA2erC,cAAejI,CAAAA,gBAAf","sourcesContent":["//@ts-nocheck\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport TimedTextEditor from \"../timed-text-editor\";\nimport MediaPlayer from \"../media-player\";\nimport VideoPlayer from \"../video-player\";\nimport Settings from \"../settings\";\nimport Shortcuts from \"../keyboard-shortcuts\";\nimport { secondsToTimecode } from \"../../util/timecode-converter\";\nimport Header from \"./src/Header.js\";\nimport ExportOptions from \"./src/ExportOptions.js\";\nimport style from \"./index.module.css\";\n\n// TODO: move to another file with tooltip - rename HowDoesThisWork or HelpMessage\nimport HowDoesThisWork from \"./src/HowDoesThisWork.js\";\n\nconst exportOptionsList = [\n  { value: \"txt\", label: \"Text file\" },\n  {\n    value: \"txtspeakertimecodes\",\n    label: \"Text file - with Speakers and Timecodes\"\n  },\n  { value: \"docx\", label: \"MS Word\" },\n  { value: \"csv\", label: \"CSV - Captions\" },\n  { value: \"draftjs\", label: \"Draft Js - json\" },\n\n];\n\nclass TranscriptEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.videoRef = React.createRef();\n\n    this.state = {\n      currentTime: 0,\n      transcriptJSONBlob: null,\n      isScrollIntoViewOn: false,\n      showSettings: false,\n      showShortcuts: false,\n      showExportOptions: false,\n      isPauseWhileTypingOn: true,\n      rollBackValueInSeconds: 15,\n      timecodeOffset: 0,\n      showTimecodes: true,\n      showSpeakers: true,\n      previewIsDisplayed: true,\n      mediaDuration: \"00:00:00:00\",\n      gridDisplay: null,\n    };\n    this.timedTextEditorRef = React.createRef();\n  }\n\n  static getDerivedStateFromProps(nextProps) {\n    if (nextProps.transcriptJSONBlob !== null) {\n      return {\n        transcriptJSONBlob: nextProps.transcriptJSONBlob\n      };\n    }\n\n    return null;\n  }\n\n  // performance optimization\n  shouldComponentUpdate = (nextProps, nextState) => {\n    if (nextProps.mediaUrl !== this.props.mediaUrl) {\n      return true;\n    }\n\n    return nextState !== this.state;\n  };\n\n  componentDidMount = () => {\n    this.updateDimensions();\n    window.addEventListener(\"resize\", this.updateDimensions);\n  };\n\n  updateDimensions = () => {\n    let gridDisplay = {\n      display: \"grid\",\n      gridTemplateColumns: \"1fr 3fr\",\n      gridColumnGap: \"1em\"\n    };\n    let displayMedia = null;\n    // if the mediaUrl is for an audio file, then extend TimedTextEditor to be full width\n    if (this.props.mediaType === \"audio\") {\n      console.log(\"this.props.mediaType\", this.props.mediaType);\n      gridDisplay = null;\n      displayMedia = { display: \"none\" };\n    }\n    // Handeling mobile view\n    const width = Math.max(\n      document.documentElement.clientWidth,\n      window.innerWidth || 0\n    );\n    if (width <= 767) {\n      gridDisplay = null;\n    }\n    this.setState({\n      gridDisplay,\n      displayMedia\n    });\n  };\n\n  // eslint-disable-next-line class-methods-use-this\n  handleWordClick = startTime => {\n    if (this.props.handleAnalyticsEvents) {\n      this.props.handleAnalyticsEvents({\n        category: \"TranscriptEditor\",\n        action: \"doubleClickOnWord\",\n        name: \"startTime\",\n        value: secondsToTimecode(startTime)\n      });\n    }\n\n    this.setCurrentTime(startTime);\n  };\n\n  // eslint-disable-next-line class-methods-use-this\n  handleTimeUpdate = e => {\n    const currentTime = e.target.currentTime;\n    this.setState({\n      currentTime\n    });\n  };\n\n  handlePlayMedia = isPlaying => {\n    this.playMedia(isPlaying);\n  };\n\n  handleIsPlaying = () => {\n    return this.isPlaying();\n  };\n\n  handleIsScrollIntoViewChange = e => {\n    const isChecked = e.target.checked;\n    this.setState({ isScrollIntoViewOn: isChecked });\n\n    if (this.props.handleAnalyticsEvents) {\n      this.props.handleAnalyticsEvents({\n        category: \"TranscriptEditor\",\n        action: \"handleIsScrollIntoViewChange\",\n        name: \"isScrollIntoViewOn\",\n        value: isChecked\n      });\n    }\n  };\n  handlePauseWhileTyping = e => {\n    const isChecked = e.target.checked;\n    this.setState({ isPauseWhileTypingOn: isChecked });\n\n    if (this.props.handleAnalyticsEvents) {\n      this.props.handleAnalyticsEvents({\n        category: \"TranscriptEditor\",\n        action: \"handlePauseWhileTyping\",\n        name: \"isPauseWhileTypingOn\",\n        value: isChecked\n      });\n    }\n  };\n\n  handleRollBackValueInSeconds = e => {\n    const rollBackValue = e.target.value;\n    this.setState({ rollBackValueInSeconds: rollBackValue });\n\n    if (this.props.handleAnalyticsEvents) {\n      this.props.handleAnalyticsEvents({\n        category: \"TranscriptEditor\",\n        action: \"handleRollBackValueInSeconds\",\n        name: \"rollBackValueInSeconds\",\n        value: rollBackValue\n      });\n    }\n  };\n\n  handleSetTimecodeOffset = timecodeOffset => {\n    this.setState({ timecodeOffset: timecodeOffset }, () => {\n      this.timedTextEditorRef.current.forceUpdate();\n    });\n  };\n\n  handleShowTimecodes = e => {\n    const isChecked = e.target.checked;\n    this.setState({ showTimecodes: isChecked });\n\n    if (this.props.handleAnalyticsEvents) {\n      this.props.handleAnalyticsEvents({\n        category: \"TranscriptEditor\",\n        action: \"handleShowTimecodes\",\n        name: \"showTimecodes\",\n        value: isChecked\n      });\n    }\n  };\n\n  handleShowSpeakers = e => {\n    const isChecked = e.target.checked;\n    this.setState({ showSpeakers: isChecked });\n\n    if (this.props.handleAnalyticsEvents) {\n      this.props.handleAnalyticsEvents({\n        category: \"TranscriptEditor\",\n        action: \"handleShowSpeakers\",\n        name: \"showSpeakers\",\n        value: isChecked\n      });\n    }\n  };\n\n  handleSettingsToggle = () => {\n    this.setState(\n      prevState => ({\n        showSettings: !prevState.showSettings\n      }),\n      () => {\n        if (this.props.handleAnalyticsEvents) {\n          this.props.handleAnalyticsEvents({\n            category: \"TranscriptEditor\",\n            action: \"handleSettingsToggle\",\n            name: \"showSettings\",\n            value: !this.state.showSettings\n          });\n        }\n      }\n    );\n  };\n\n  handleShortcutsToggle = () => {\n    this.setState(\n      prevState => ({\n        showShortcuts: !prevState.showShortcuts\n      }),\n      () => {\n        if (this.props.handleAnalyticsEvents) {\n          this.props.handleAnalyticsEvents({\n            category: \"TranscriptEditor\",\n            action: \"handleShortcutsToggle\",\n            name: \"showShortcuts\",\n            value: !this.state.showShortcuts\n          });\n        }\n      }\n    );\n  };\n\n  handleExportToggle = () => {\n    console.log(\"handleExportToggle\", this.state.showExportOptions);\n    this.setState(\n      prevState => ({\n        showExportOptions: !prevState.showExportOptions\n      }),\n      () => {\n        if (this.props.handleAnalyticsEvents) {\n          this.props.handleAnalyticsEvents({\n            category: \"TranscriptEditor\",\n            action: \"handleExportToggle\",\n            name: \"showExportOptions\",\n            value: !this.state.showExportOptions\n          });\n        }\n      }\n    );\n  };\n\n  handleExportOptionsChange = e => {\n    const exportFormat = e.target.value;\n    console.log(\"export format: \" + exportFormat);\n\n    if (exportFormat !== \"instructions\") {\n      const fileName = this.props.title\n        ? this.props.title\n        : this.props.mediaUrl;\n\n\n        console.log(\"STILL HERE \");\n      const { data, ext } = this.getEditorContent(exportFormat);\n      console.log(\"ext1: \" + ext);\n      let tmpData = data;\n      console.log(\"tmp data: \" + tmpData);\n\n      if (ext === \"json\") {\n        tmpData = JSON.stringify(data, null, 2);\n      }\n      console.log(\"fileName: \" + fileName);\n      console.log(\"ext2: \" + ext);\n\n      if (ext !== \"docx\") {\n        this.download(tmpData, `${fileName}.${ext}`);\n      }\n\n      if (this.props.handleAnalyticsEvents) {\n        this.props.handleAnalyticsEvents({\n          category: \"TranscriptEditor\",\n          action: \"handleExportOptionsChange\",\n          name: \"exportFile\",\n          value: exportFormat\n        });\n      }\n    }\n  };\n\n  // https://stackoverflow.com/questions/2897619/using-html5-javascript-to-generate-and-save-a-file\n  download = (content, filename, contentType) => {\n    const type = contentType || \"application/octet-stream\";\n    const link = document.createElement(\"a\");\n    const blob = new Blob([content], { type: type });\n\n    link.href = window.URL.createObjectURL(blob);\n    link.download = filename;\n    // Firefox fix - cannot do link.click() if it's not attached to DOM in firefox\n    // https://stackoverflow.com/questions/32225904/programmatical-click-on-a-tag-not-working-in-firefox\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  getEditorContent = exportFormat => {\n    const title = this.props.title ? this.props.title : \"\";\n    console.log(\"exportFormat: \" + exportFormat);\n    console.log(\"title: \" + title);\n    return this.timedTextEditorRef.current.getEditorContent(\n      exportFormat,\n      title\n    );\n  };\n\n  handlePreviewIsDisplayed = () => {\n    this.setState({\n      previewIsDisplayed: !this.state.previewIsDisplayed\n    });\n  };\n\n  onLoadedDataGetDuration = e => {\n    const currentDuration = e.target.duration;\n    const currentDurationWithOffset =\n      currentDuration + this.state.timecodeOffset;\n    const durationInSeconds = secondsToTimecode(currentDurationWithOffset);\n\n    this.setState({\n      mediaDuration: durationInSeconds\n    });\n\n    if (this.props.handleAnalyticsEvents) {\n      this.props.handleAnalyticsEvents({\n        category: \"TranscriptEditor\",\n        action: \"onLoadedDataGetDuration\",\n        name: \"durationInSeconds-WithoutOffset\",\n        value: secondsToTimecode(currentDuration)\n      });\n    }\n  };\n\n  handleChangePreviewViewWidth = e => {\n    const newPreviewViewWidth = e.target.value;\n    this.setState({\n      previewViewWidth: newPreviewViewWidth\n    });\n  };\n\n  handleAutoSaveChanges = data => {\n    // making `TranscriptEditor` - `handleAutoSaveChanges` optional\n    if (this.props.handleAutoSaveChanges) {\n      this.props.handleAutoSaveChanges(data);\n    }\n  };\n\n  render() {\n    const videoPlayer = (\n      <VideoPlayer\n        mediaUrl={this.props.mediaUrl}\n        onTimeUpdate={this.handleTimeUpdate}\n        videoRef={this.videoRef}\n        previewIsDisplayed={this.state.previewIsDisplayed}\n        onLoadedDataGetDuration={this.onLoadedDataGetDuration}\n      />\n    );\n\n    const mediaControls = (\n      <MediaPlayer\n        title={this.props.title ? this.props.title : \"\"}\n        mediaDuration={this.state.mediaDuration}\n        currentTime={this.state.currentTime}\n        hookSeek={foo => (this.setCurrentTime = foo)}\n        hookPlayMedia={foo => (this.playMedia = foo)}\n        hookIsPlaying={foo => (this.isPlaying = foo)}\n        rollBackValueInSeconds={this.state.rollBackValueInSeconds}\n        timecodeOffset={this.state.timecodeOffset}\n        mediaUrl={this.props.mediaUrl}\n        handleAnalyticsEvents={this.props.handleAnalyticsEvents}\n        videoRef={this.videoRef}\n      />\n    );\n\n    const settings = (\n      <Settings\n        handleSettingsToggle={this.handleSettingsToggle}\n        defaultValuePauseWhileTyping={this.state.isPauseWhileTypingOn}\n        defaultValueScrollSync={this.state.isScrollIntoViewOn}\n        defaultRollBackValueInSeconds={this.state.rollBackValueInSeconds}\n        timecodeOffset={this.state.timecodeOffset}\n        showTimecodes={this.state.showTimecodes}\n        showSpeakers={this.state.showSpeakers}\n        handlePauseWhileTyping={this.handlePauseWhileTyping}\n        handleIsScrollIntoViewChange={this.handleIsScrollIntoViewChange}\n        handleRollBackValueInSeconds={this.handleRollBackValueInSeconds}\n        handleSetTimecodeOffset={this.handleSetTimecodeOffset}\n        handleShowTimecodes={this.handleShowTimecodes}\n        handleShowSpeakers={this.handleShowSpeakers}\n        handleAnalyticsEvents={this.props.handleAnalyticsEvents}\n        previewIsDisplayed={this.state.previewIsDisplayed}\n        handlePreviewIsDisplayed={this.handlePreviewIsDisplayed}\n        handleChangePreviewViewWidth={this.handleChangePreviewViewWidth}\n      />\n    );\n\n    const exportOptions = (\n      <ExportOptions\n        exportOptionsList={exportOptionsList}\n        handleExportOptionsChange={this.handleExportOptionsChange}\n        handleExportToggle={this.handleExportToggle}\n      />\n    );\n\n    const shortcuts = (\n      <Shortcuts handleShortcutsToggle={this.handleShortcutsToggle} />\n    );\n\n    // export format for `handleAutoSaveChanges` is assigned with `autoSaveContentType`\n    // but if that's not specified  it looks at  `sttJsonType`\n    // if that's not specified either, it falls back on `draftjs`.\n    let contentFormat = \"draftjs\";\n    if (this.props.autoSaveContentType) {\n      contentFormat = this.props.autoSaveContentType;\n    } else if (this.props.sttJsonType) {\n      contentFormat = this.props.sttJsonType;\n    }\n\n    const timedTextEditor = (\n      <TimedTextEditor\n        fileName={this.props.fileName}\n        transcriptData={this.state.transcriptJSONBlob}\n        timecodeOffset={this.state.timecodeOffset}\n        onWordClick={this.handleWordClick}\n        playMedia={this.handlePlayMedia}\n        isPlaying={this.handleIsPlaying}\n        currentTime={this.state.currentTime}\n        isEditable={this.props.isEditable}\n        spellCheck={this.props.spellCheck}\n        sttJsonType={this.props.sttJsonType}\n        mediaUrl={this.props.mediaUrl}\n        isScrollIntoViewOn={this.state.isScrollIntoViewOn}\n        isPauseWhileTypingOn={this.state.isPauseWhileTypingOn}\n        showTimecodes={this.state.showTimecodes}\n        showSpeakers={this.state.showSpeakers}\n        ref={this.timedTextEditorRef}\n        handleAnalyticsEvents={this.props.handleAnalyticsEvents}\n        handleAutoSaveChanges={this.handleAutoSaveChanges}\n        autoSaveContentType={contentFormat}\n        title={this.props.title ? this.props.title : Date.now()}\n      />\n    );\n\n    const header = (\n      <Header\n        showSettings={this.state.showSettings}\n        showShortcuts={this.state.showShortcuts}\n        showExportOptions={this.state.showExportOptions}\n        settings={settings}\n        shortcuts={shortcuts}\n        exportOptions={exportOptions}\n        tooltip={HowDoesThisWork}\n        mediaUrl={this.props.mediaUrl}\n        mediaControls={this.videoRef.current ? mediaControls : null}\n        handleSettingsToggle={this.handleSettingsToggle}\n        handleShortcutsToggle={this.handleShortcutsToggle}\n        handleExportToggle={this.handleExportToggle}\n      />\n    );\n\n    return (\n      <div className={style.container}>\n        {this.props.mediaUrl ? header : null}\n\n        <div className={style.grid}>\n          <section className={style.row} style={this.state.gridDisplay}>\n            <aside className={style.aside} style={this.state.displayMedia}>\n              {this.props.mediaUrl ? videoPlayer : null}\n            </aside>\n\n            <main\n              className={\n                this.props.mediaType === \"audio\"\n                  ? style.mainWithAudiio\n                  : style.main\n              }\n            >\n              {this.props.mediaUrl && this.props.transcriptJSONBlob\n                ? timedTextEditor\n                : null}\n            </main>\n          </section>\n        </div>\n      </div>\n    );\n  }\n}\n\nTranscriptEditor.propTypes = {\n  onClick: PropTypes.func,\n  title: PropTypes.string,\n  mediaUrl: PropTypes.string,\n  isEditable: PropTypes.bool,\n  spellCheck: PropTypes.bool,\n  sttJsonType: PropTypes.string,\n  handleAnalyticsEvents: PropTypes.func,\n  fileName: PropTypes.string,\n  transcriptJSONBlob: PropTypes.object,\n  mediaType: PropTypes.string\n};\n\nexport default TranscriptEditor;\n"]},"metadata":{},"sourceType":"module"}